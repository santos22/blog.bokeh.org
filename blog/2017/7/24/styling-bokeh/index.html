<!doctype html>
<meta charset="utf-8">
<head>

<link rel="stylesheet" href="../../../../../static/normalize.css">
<link rel="stylesheet" href="../../../../../static/skeleton.css">
<link rel="stylesheet" href="../../../../../static/style.css">
<link rel="stylesheet" href="../../../../../static/gen/styles.css">
<link rel="stylesheet" href="../../../../../static/custom.css">
<link rel="stylesheet" href="../../../../../static/pygments.css">

<!-- Mobile Specific Metas
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- FONT
–––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">

<title>Styling Bokeh Visualizations | Bokeh Org</title>

</head>
<body>
    <div class="navbar-spacer"></div>
    <nav class="navbar">
      <div class="container">
        <ul class="navbar-list">
            <li class="navbar-item"><a class="navbar-link" href="/">Home</a></li>
            <li class="navbar-item"><a class="navbar-link" href="https://bokeh.pydata.org/en/latest">Documentation</a></li>
            <li class="navbar-item"><a class="navbar-link" href="/blog">Blog</a></li>
        </ul>
      </div>
    </nav>

    <div class="body-wrapper">
      
  <div class="blog-post">
    
  
    
  <div class="container">
    <div class="row">
      <div class="eleven columns">
        
      <div class="meta-bar">
        <h1>Styling Bokeh Visualizations</h1>
        <p class="meta">
          by
          
            <a href="https://twitter.com/canavandl">Luke Canavan</a>
          
          on Monday, July 24, 2017
        </p>
      </div>
    
      </div>
    </div>
  </div>

  
  
    
      
  <div class="container">
    <div class="row">
      <div class="eleven columns">
        <div class="text-block text-block-default">
  <h3>Introduction</h3>
<p>Web developers typically confine their business logic code into JS files,
their layouts into HTML templates, and their styling into CSS files. This
decoupling makes navigating and working on a code base easier.</p>
<p>In Bokeh, it's just as valuable to decouple the styles of your Models from the
business logic that generates them. In this post, I'll share two ways I've
found helpful for doing this.</p>
<p>Additionally, I've created a Monokai-inspired dark theme for Bokeh that you
can use. It makes Bokeh visualizations look like this:</p>
<div>
<br>
<center>
<script
    src="./auto_theme.js"
    id="03c6e4fc-3d9c-46d8-a343-9a51b7339794"
    data-bokeh-model-id="8d155e08-7d33-4fb5-84fd-7a7738e994df"
    data-bokeh-doc-id="58e8b09d-d61a-49c7-b541-2404988bbc89"
></script>
</center>
<br>
</div><p>You can download the Theme file
<a href="https://gist.github.com/canavandl/4ed8e3d1fccacfb9b5b237821decfda7">here</a>
and read below about how to use it.</p>
<h3>Using Styling Dictionaries</h3>
<p>One solution to separating styles from implementation is to create an adjacent
python module (I generally call it "styles.py") that contains dictionaries of
Bokeh style properties for Models. To me, the distinction of whether something
belongs in the styles dictionary or business logic is whether it's based on
data. If a Glyph color is computed based on some data value, it belongs in the
business logic. Otherwise, it should go in a styles dictionary. Based on that
rubric, I'll even include some simple Bokeh Models like Tickers and Formatters
in my styles dictionary.</p>
<p>Here's an example styles module:</p>
<div class="highlight"><pre><span></span><span class="c1">### contents of styles.py</span>

<span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">BasicTicker</span><span class="p">,</span> <span class="n">PrintfTickFormatter</span>

<span class="n">DARK_GRAY</span> <span class="o">=</span> <span class="s2">&quot;#282828&quot;</span>
<span class="n">BROWN_GRAY</span> <span class="o">=</span> <span class="s2">&quot;#49483E&quot;</span>

<span class="n">PLOT_OPTS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
  <span class="n">background_fill_color</span><span class="o">=</span><span class="n">DARK_GRAY</span><span class="p">,</span>
  <span class="n">border_fill_color</span><span class="o">=</span><span class="n">DARK_GRAY</span><span class="p">,</span>
  <span class="n">outline_line_color</span><span class="o">=</span><span class="n">BROWN_GRAY</span><span class="p">,</span>
  <span class="n">plot_height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span>
  <span class="n">plot_width</span><span class="o">=</span><span class="mi">800</span>
<span class="p">)</span>

<span class="n">AXIS_OPTS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
  <span class="n">axis_label_standoff</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
  <span class="n">axis_label_text_font_size</span><span class="o">=</span><span class="s2">&quot;15pt&quot;</span><span class="p">,</span>
  <span class="n">axis_line_color</span><span class="o">=</span><span class="n">BROWN_GRAY</span><span class="p">,</span>
  <span class="n">ticker</span><span class="o">=</span><span class="n">BasicTicker</span><span class="p">(</span><span class="n">num_minor_ticks</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
  <span class="n">formatter</span><span class="o">=</span><span class="n">PrintfTickFormatter</span><span class="p">(</span><span class="n">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%4.1e</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
<p>Next, I'll splat these style dictionaries into the appropriate Models when
instantiating them. Here's how it looks in practice:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.models</span> <span class="kn">import</span> <span class="n">Plot</span><span class="p">,</span> <span class="n">Range1d</span><span class="p">,</span> <span class="n">LinearAxis</span>
<span class="kn">from</span> <span class="nn">.styles</span> <span class="kn">import</span> <span class="n">PLOT_OPTS</span><span class="p">,</span> <span class="n">AXIS_OPTS</span>

<span class="n">plot</span> <span class="o">=</span> <span class="n">Plot</span><span class="p">(</span><span class="n">x_range</span><span class="o">=</span><span class="n">Range1d</span><span class="p">(),</span> <span class="n">y_range</span><span class="o">=</span><span class="n">Range1d</span><span class="p">(),</span> <span class="o">**</span><span class="n">PLOT_OPTS</span><span class="p">)</span>
<span class="n">plot</span><span class="o">.</span><span class="n">add_layout</span><span class="p">(</span>
  <span class="n">LinearAxis</span><span class="p">(</span><span class="o">**</span><span class="n">AXIS_OPTS</span><span class="p">),</span> <span class="s2">&quot;left&quot;</span>
<span class="p">)</span>
<span class="n">plot</span><span class="o">.</span><span class="n">add_layout</span><span class="p">(</span>
  <span class="n">LinearAxis</span><span class="p">(</span><span class="o">**</span><span class="n">AXIS_OPTS</span><span class="p">),</span> <span class="s2">&quot;below&quot;</span>
<span class="p">)</span>
</pre></div>
<p>The benefit of using style dictionaries is their simplicity. They make
visualization code much shorter and readable because they pull out all of your
styling code into a separate module. I think styles dictionaries most useful
for simpler visualization, perhaps embedding a single plot within a web app.</p>
<h3>Using Bokeh Themes</h3>
<p>The alternative to using styling dictionaries is creating Bokeh Themes. Themes
are a specification for creating custom defaults for Bokeh Models via a YAML
file or a JSON. I think that Themes are a fantastic way to maintaining a
consistent style across a larger set of visualizations because you don't have
to remember to explicitly add styles to individual models. Here's an example of
a YAML theme file:</p>
<div class="highlight"><pre><span></span><span class="c1">### contents of theme.yaml</span>
<span class="l l-Scalar l-Scalar-Plain">attrs</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">Plot</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">background_fill_color</span><span class="p p-Indicator">:</span> <span class="s">&quot;#282828&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">border_fill_color</span><span class="p p-Indicator">:</span> <span class="s">&quot;#282828&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">outline_line_color</span><span class="p p-Indicator">:</span> <span class="s">&quot;#49483E&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">Axis</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">axis_label_standoff</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">10</span>
        <span class="l l-Scalar l-Scalar-Plain">axis_label_text_font_size=&quot;15pt&quot;</span>
        <span class="l l-Scalar l-Scalar-Plain">axis_line_color</span><span class="p p-Indicator">:</span> <span class="s">&quot;#49483E&quot;</span>
    <span class="l l-Scalar l-Scalar-Plain">BasicTicker</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">num_minor_ticks</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
    <span class="l l-Scalar l-Scalar-Plain">PrintfTickFormatter</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">format</span><span class="p p-Indicator">:</span> <span class="s">&quot;%4.1e&quot;</span>
</pre></div>
<p>When you set your Document's <code>theme</code> property, all of your custom styles
are applied to the appropriate models. You can read more in the <a href="https://bokeh.pydata.org/en/latest/docs/reference/themes.html#bokeh-themes">Themes
documentation</a>.</p>
<p>Here, we're attaching our Theme to our Bokeh Document:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bokeh.theme</span> <span class="kn">import</span> <span class="n">Theme</span>

<span class="n">theme</span> <span class="o">=</span> <span class="n">Theme</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s2">&quot;./theme.yaml&quot;</span><span class="p">)</span>

<span class="n">doc</span> <span class="o">=</span> <span class="n">Document</span><span class="p">(</span><span class="n">theme</span><span class="o">=</span><span class="n">theme</span><span class="p">)</span> <span class="c1">### or Document().theme = theme</span>
<span class="n">doc</span><span class="o">.</span><span class="n">add_root</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>
</pre></div>
<p>Now the Axis styles in our yaml file are applied to all Axis Models within
our Document!</p>
<h3>When to Use Styling Dictionaries or Themes</h3>
<p>The styling dictionary approach seems to work best when developing via the
<code>bokeh.models</code> API, where you're explicitly creating and adding all of your
models. (You can read my previous
<a href="https://bokeh.github.io/blog/2017/7/5/idiomatic_bokeh/">blog post</a> about the
bokeh.models API). In the <code>bokeh.plotting</code> API some plot components, like
axes for example, are implicitly created inside the <code>figure</code> method. This is
where Themes may be better solution because they will automatically be applied
to all relevant Models.</p>
<p>What if you want different styles for the same model type? It's possible to
have different style dictionaries for distinct model instances (i.e. having
<code>X_AXIS_OPTS</code> and <code>Y_AXIS_OPTS</code> dicts for a LinearAxis Model).
Alternatively, since Themes just change the model defaults, it's possible to
override the new defaults however you normally would.</p>
<p>Finally, Themes are easier to share with others. You should be able to
download or copy and paste the Theme file from
<a href="https://gist.github.com/canavandl/4ed8e3d1fccacfb9b5b237821decfda7">here</a>
into a local file and attach it to any visualization you already have.</p>
<h3>Grab Bag of Bokeh Styling Tips</h3>
<p>Unrelated to styling dictionaries or themes, I have a couple of styling
pro-tips that I'd like to share:</p>
<ul>
<li>If you want your HTML body (or whatever HTML element your layout is inside of)
style to be visible behind your plots, set the Plot <code>background_fill_color</code>
and <code>border_fill_color</code> attributes to <code>None</code>.</li>
<li>If you want to add custom CSS to your layout (i.e. in order to change the html
body background color) you can specify a custom template for your Document and
either inline or load your custom CSS there.</li>
</ul>
<h3>Conclusion</h3>
<p>Bokeh's styling is very nice by default. However, extending Bokeh with your
own custom styles can add an impressive level of polish to your visualizations.
Now that you're an expert in styling, here are some things to do next:</p>
<ul>
<li>Try out the dark theme and share your feedback</li>
<li>Develop a theme of your own and share with us</li>
</ul>

</div>
      </div>
    </div>
  </div>

    
  


    
    
    
    <div class="container">
      <div class="row">
        <div class="eight columns">
        
          <div class="nav-prev">
            <a href="../../../../../blog/2017/7/5/idiomatic_bokeh/">Previous: Enjoying the bokeh.models API</a>
          </div>
        
        
        </div>
      </div>
    </div>
  </div>

    </div>

    
    <div class="bottomsummary">
      <div class="container">
      </div>
    </div>
    

    
    <footer>
      <div class="container">
        <div class="row">
          <div class="four columns icon-bar">
            <a href="https://github.com/bokeh/bokeh/" title="Bokeh on GitHub"
              ><i class="fa fa-github"></i></a>
            <a href="https://github.com/bokeh/bokeh/issues/" title="Report Issues for Bokeh"
              ><i class="fa fa-bug"></i></a>
            <a href="https://twitter.com/BokehPlots" title="Find Bokeh on Twitter"
              ><i class="fa fa-twitter"></i></a>
            <a href="https://gitter.im/bokeh/bokeh" title="Chat on Gitter"
              ><i class="fa fa-comment"></i></a>
            <a href="https://github.com/bokeh/bokeh.github.io/tree/source/content/blog/styling-bokeh/contents.lr" title="View source for this page"><i class="fa fa-code"></i></a>
          </div>
        </div>
      </div>
    </footer>
    

<!-- JS
================================================== -->
<script src="https://code.jquery.com/jquery-1.7.1.min.js"></script>

<!-- Google Analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-27761864-7', 'pydata.org');
  ga('send', 'pageview');
</script>

</body>
